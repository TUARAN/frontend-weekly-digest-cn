> 原文：[A Better Way to Express Percentage Height](https://css-tip.com/percentage-height/)
> 翻译：TUARAN
> 欢迎关注 [前端周刊](https://github.com/TUARAN/frontend-weekly-digest-cn)，每周更新国外论坛的前端热门文章，紧跟时事，掌握前端技术动态。

# 一种更好的百分比高度表达方式

百分比高度是 CSS 里的常见问题。很多时候你写了 `height: 100%` 想填满垂直空间，但它在大多数场景下会失效，因为父容器并没有显式高度。即使父容器有确定高度，你仍可能遇到 margin、box-sizing 等相关问题。

相比 `height: 100%`，你可以使用新的 `stretch` 值，它在这类场景下通常表现更好。

```css
.box {
  height: stretch;
}
```

## 它是怎么工作的？

顾名思义，`stretch` 会尝试把元素拉伸到填满父容器（更准确地说是 containing block）。

它遵循两条规则：

- 如果该元素可通过 `align-self`（以及 `align-items`）进行对齐，那么这个值会产生与拉伸对齐相同的结果（`align-self: stretch`）。

- 如果对齐规则不适用，它的行为与 `height: 100%` 类似，但会考虑 margin，且不受 `box-sizing` 值影响。换句话说，不会因为 margin、padding 或 border 导致溢出问题。

在下面的演示中，`height: 100%` 要么失效，要么产生溢出；而 `height: stretch` 的效果是正确的。

⚠️ 支持有限（目前仅 Chrome）

See the Pen  
Height: 100% vs height: stretch by Temani Afif ([@t_afif](https://codepen.io/t_afif))  
on [CodePen](https://codepen.io/).

另外，使用 `height: stretch` 会让元素拥有“确定高度（definite height）”，这意味着可以实现级联拉伸。

```css
* {
  height: stretch;
}
```

See the Pen  
cascading stretch by Temani Afif ([@t_afif](https://codepen.io/t_afif))  
on [CodePen](https://codepen.io/).

如果元素不适用自对齐（self-alignment），并且父容器（containing block）也没有显式高度，那么 `stretch` 可能不会生效。和 `height: 100%` 一样，它会回退到 `auto`。这种情况不常见，但也别忽略。

下面是一个涉及 inline-block 元素的示例：

See the Pen  
No stretching by Temani Afif ([@t_afif](https://codepen.io/t_afif))  
on [CodePen](https://codepen.io/).

## 如果不是 100% 呢？

`stretch` 只覆盖 `100%` 这个场景。如果你想要比如 `height: 80%`，可以使用 `calc-size()` 函数。

```css
.box {
  height: calc-size(stretch, .8*size);
  /* 等价于 height: calc(.8*stretch) */
}
```

这里计算中的 `size` 关键字会引用 `stretch` 的值来求结果，也就是“stretch 的 80%”。

See the Pen  
calc-size() with stretch by Temani Afif ([@t_afif](https://codepen.io/t_afif))  
on [CodePen](https://codepen.io/).

注意，同样的逻辑也适用于 `width: stretch`，只是第一条规则里需要考虑的是 `justify-*` 属性，而不是 `align-*` 属性。

