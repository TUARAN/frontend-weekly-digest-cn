> 原文：[A Better Way to Express Percentage Height](https://css-tip.com/percentage-height/)
> 翻译：TUARAN
> 欢迎关注 [前端周刊](https://github.com/TUARAN/frontend-weekly-digest-cn)，每周更新国外论坛的前端热门文章，紧跟时事，掌握前端技术动态。

# 一种更可靠的百分比高度写法

在很多布局场景里，我们会写出类似 `height: 100%`、`min-height: 100%` 这样的样式，希望子元素能「铺满」父元素高度。  
但在真实项目中，你可能遇到过这些问题：

- 百分比高度「完全不生效」，元素高度还是自动撑开；  
- 某些嵌套层级里表现正常，换个父元素结构就错位；  
- 在滚动容器、视口单位、弹性盒子等组合场景下，行为难以预测。

这篇文章从规范与渲染实现的角度解释了**为什么传统的百分比高度容易踩坑**，并给出一套更可靠的写法思路。

---

## 为什么百分比高度经常「说不清」

根据 CSS 规范，百分比高度的计算依赖于父元素的「确定高度（definite height）」：

- 如果父元素的高度是一个明确的值（例如 `height: 400px`、`height: 50vh`），子元素的 `height: 50%` 就有了清晰的参考；  
- 如果父元素高度是「内容自适应」（默认值 `auto`），那子元素的百分比高度往往会退化为「不生效」或浏览器特定的行为。

在实际工程里，很多布局都是：

- 顶层用视口单位（`100vh`）或网格/弹性布局；  
- 中间某一层容器高度是由内容撑开的 `auto`；  
- 最内层组件又写了百分比高度。

这样的组合导致浏览器很难给出一致的计算结果，也就出现了「在某些浏览器正常、在另一些浏览器错位」的问题。

---

## 更稳妥的思路：让「参考系」显式化

作者给出的实践建议，可以概括为一句话：

> **不要指望「隐式传递」的高度链路，而要为百分比高度补上一个清晰的参考系。**

常见做法包括：

- 在真正需要作为参考系的父容器上，显式设置高度：  
  - 用 `min-height: 100vh` 或 `block-size: 100%` 等让它相对视口或祖先容器明确起来；  
- 在布局骨架层使用 CSS Grid/Flex，把高度分配的逻辑放在顶层，而不是埋在深层组件里；  
- 对需要撑满剩余空间的区域，优先考虑 `flex: 1`、`grid-template-rows` 这类布局原语，而不是直接写 `height: 100%`。

这样做的好处是：

- 高度关系一目了然，代码可读性更强；  
- 浏览器不需要在「不确定高度」的前提下做推断，互操作性更好；  
- 当设计稿调整或容器重构时，更容易跟着一起演进。

---

## 与视口单位、容器查询等现代特性的配合

文章还讨论了和现代 CSS 特性的组合用法：

- 使用 `dv*`/`sv*` 等新视口单位，减少移动端地址栏收起/展开带来的高度跳变；  
- 在组件级别更多地依赖容器查询（Container Queries）和 `minmax()` 等能力，让布局对「 *宽高约束* 」更健壮，而不是在具体像素上纠结。

总的来说，作者主张从「纯百分比高度心智」转向「**基于布局系统的高度协作心智**」：

- 百分比高度依然有价值，但前提是你有意识地为它构建了一个稳定的参考系；  
- 在这之上，再结合 Grid/Flex/视口单位等能力，才能让页面在不同浏览器和设备上表现得更可控。

